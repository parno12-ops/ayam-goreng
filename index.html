<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ayam Goreng Burus Laos Mama Yati</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        header {
            background-color: #d32f2f; /* Merah khas ayam goreng */
            color: white;
            text-align: center;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h2 {
            color: #d32f2f;
        }
        .menu-item {
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .menu-item label {
            display: block;
            margin-bottom: 5px;
        }
        .menu-item select {
            margin-left: 10px;
        }
        .order-section {
            margin-top: 20px;
        }
        .order-section input, .order-section select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .delivery-option {
            display: none;
        }
        button {
            background-color: #d32f2f;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #b71c1c;
        }
        footer {
            text-align: center;
            padding: 10px;
            background-color: #d32f2f;
            color: white;
            margin-top: 20px;
        }
        .struk {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .struk pre {
            white-space: pre-wrap;
        }
        canvas {
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <h1>Ayam Goreng Burus Laos Mama Yati</h1>
        <p>Jl. Raya Beji Depan(sebrang) Counter Kavin Cell sebelah barat warung Madura dan Warung Nasgor Cakman</p>
    </header>

    <div class="container">
        <h2>Daftar Menu</h2>
        <p>Semua menu sudah free sambel plus lalaban. Jika stok habis, akan disesuaikan dengan stok yang tersedia.</p>

        <div class="menu-item">
            <label><input type="checkbox" id="ayam-goreng"> Ayam Goreng - Rp 8.000</label>
            <label>Jumlah: 
                <select id="qty-ayam">
                    <option value="0">0</option>
                    <!-- Generate options 1-100 -->
                    <script>
                        for (let i = 1; i <= 100; i++) {
                            document.write('<option value="' + i + '">' + i + '</option>');
                        }
                    </script>
                </select>
            </label>
            <label>Bagian: 
                <select id="bagian-ayam">
                    <option value="">Pilih bagian</option>
                    <option value="Dada">Dada</option>
                    <option value="Paha Atas">Paha Atas</option>
                    <option value="Paha Bawah">Paha Bawah</option>
                    <option value="Sayap">Sayap</option>
                </select>
            </label>
        </div>

        <div class="menu-item">
            <label><input type="checkbox" id="nasi-ayam"> Nasi Ayam - Rp 12.000</label>
            <label>Jumlah: 
                <select id="qty-nasi-ayam">
                    <option value="0">0</option>
                    <script>
                        for (let i = 1; i <= 100; i++) {
                            document.write('<option value="' + i + '">' + i + '</option>');
                        }
                    </script>
                </select>
            </label>
            <label>Bagian: 
                <select id="bagian-nasi-ayam">
                    <option value="">Pilih bagian</option>
                    <option value="Dada">Dada</option>
                    <option value="Paha Atas">Paha Atas</option>
                    <option value="Paha Bawah">Paha Bawah</option>
                    <option value="Sayap">Sayap</option>
                </select>
            </label>
        </div>

        <div class="menu-item">
            <label><input type="checkbox" id="nasi-putih"> Nasi Putih - Rp 4.000</label>
            <label>Jumlah: 
                <select id="qty-nasi-putih">
                    <option value="0">0</option>
                    <script>
                        for (let i = 1; i <= 100; i++) {
                            document.write('<option value="' + i + '">' + i + '</option>');
                        }
                    </script>
                </select>
            </label>
        </div>

        <div class="menu-item">
            <label><input type="checkbox" id="ati-ampela"> AtiAmpela - Rp 6.000</label>
            <label>Jumlah: 
                <select id="qty-ati-ampela">
                    <option value="0">0</option>
                    <script>
                        for (let i = 1; i <= 100; i++) {
                            document.write('<option value="' + i + '">' + i + '</option>');
                        }
                    </script>
                </select>
            </label>
        </div>

        <div class="menu-item">
            <label><input type="checkbox" id="tahu-tempe"> Tahu/Tempe - Rp 1.000</label>
            <label>Jumlah: 
                <select id="qty-tahu-tempe">
                    <option value="0">0</option>
                    <script>
                        for (let i = 1; i <= 100; i++) {
                            document.write('<option value="' + i + '">' + i + '</option>');
                        }
                    </script>
                </select>
            </label>
        </div>

        <div class="menu-item">
            <label><input type="checkbox" id="sate-brutu"> Sate Brutu - Rp 3.500</label>
            <label>Jumlah: 
                <select id="qty-sate-brutu">
                    <option value="0">0</option>
                    <script>
                        for (let i = 1; i <= 100; i++) {
                            document.write('<option value="' + i + '">' + i + '</option>');
                        }
                    </script>
                </select>
            </label>
        </div>

        <div class="menu-item">
            <label><input type="checkbox" id="kepala"> Kepala - Rp 2.500</label>
            <label>Jumlah: 
                <select id="qty-kepala">
                    <option value="0">0</option>
                    <script>
                        for (let i = 1; i <= 100; i++) {
                            document.write('<option value="' + i + '">' + i + '</option>');
                        }
                    </script>
                </select>
            </label>
        </div>

        <div class="order-section">
            <h2>Informasi Pemesanan</h2>
            <label>Nama Pemesan: <input type="text" id="nama-pemesan" placeholder="Masukkan nama Anda"></label>
            <label>Pilihan Pengiriman:
                <select id="pengiriman">
                    <option value="ambil">Ambil di Warung</option>
                    <option value="antar">Diantar</option>
                </select>
            </label>
            <div class="delivery-option" id="alamat-section">
                <label>Alamat Lengkap: <input type="text" id="alamat" placeholder="Masukkan alamat lengkap"></label>
                <p>Ongkir bisa nego melalui WhatsApp.</p>
            </div>
            <button onclick="pesan()">Pesan Sekarang</button>
        </div>

        <div class="struk" id="struk">
            <h3>Bukti Pesanan</h3>
            <pre id="struk-content"></pre>
            <button onclick="downloadStruk()">Download Bukti Pesanan (JPG)</button>
        </div>
    </div>

    <footer>
        <p>By. Ayam Goreng MMY</p>
    </footer>

    <canvas id="struk-canvas" width="400" height="600"></canvas>

    <script>
        // Function to auto-check checkbox when quantity > 0
        function autoCheck(checkboxId, qtyId) {
            const qtySelect = document.getElementById(qtyId);
            const checkbox = document.getElementById(checkboxId);
            qtySelect.addEventListener('change', function() {
                if (parseInt(this.value) > 0) {
                    checkbox.checked = true;
                } else {
                    checkbox.checked = false;
                }
            });
        }

        // Apply auto-check to all menu items
        autoCheck('ayam-goreng', 'qty-ayam');
        autoCheck('nasi-ayam', 'qty-nasi-ayam');
        autoCheck('nasi-putih', 'qty-nasi-putih');
        autoCheck('ati-ampela', 'qty-ati-ampela');
        autoCheck('tahu-tempe', 'qty-tahu-tempe');
        autoCheck('sate-brutu', 'qty-sate-brutu');
        autoCheck('kepala', 'qty-kepala');

        document.getElementById('pengiriman').addEventListener('change', function() {
            const alamatSection = document.getElementById('alamat-section');
            if (this.value === 'antar') {
                alamatSection.style.display = 'block';
            } else {
                alamatSection.style.display = 'none';
            }
        });

        function pesan() {
            const nama = document.getElementById('nama-pemesan').value;
            const pengiriman = document.getElementById('pengiriman').value;
            const alamat = document.getElementById('alamat').value;

            if (!nama) {
                alert('Silakan isi nama pemesan.');
                return;
            }

            if (pengiriman === 'antar' && !alamat) {
                alert('Silakan isi alamat lengkap untuk pengiriman.');
                return;
            }

            let pesanan = [];
            let total = 0;

            // Ayam Goreng
            const ayamChecked = document.getElementById('ayam-goreng').checked;
            const qtyAyam = parseInt(document.getElementById('qty-ayam').value) || 0;
            const bagianAyam = document.getElementById('bagian-ayam').value;
            if (ayamChecked && qtyAyam > 0) {
                if (!bagianAyam) {
                    alert('Silakan pilih bagian untuk Ayam Goreng.');
                    return;
                }
                pesanan.push(`Ayam Goreng (${bagianAyam}) x${qtyAyam} - Rp ${(8000 * qtyAyam).toLocaleString()}`);
                total += 8000 * qtyAyam;
            }

            // Nasi Ayam
            const nasiAyamChecked = document.getElementById('nasi-ayam').checked;
            const qtyNasiAyam = parseInt(document.getElementById('qty-nasi-ayam').value) || 0;
            const bagianNasiAyam = document.getElementById('bagian-nasi-ayam').value;
            if (nasiAyamChecked && qtyNasiAyam > 0) {
                if (!bagianNasiAyam) {
                    alert('Silakan pilih bagian untuk Nasi Ayam.');
                    return;
                }
                pesanan.push(`Nasi Ayam (${bagianNasiAyam}) x${qtyNasiAyam} - Rp ${(12000 * qtyNasiAyam).toLocaleString()}`);
                total += 12000 * qtyNasiAyam;
            }

            // Nasi Putih
            const nasiPutihChecked = document.getElementById('nasi-putih').checked;
            const qtyNasiPutih = parseInt(document.getElementById('qty-nasi-putih').value) || 0;
            if (nasiPutihChecked && qtyNasiPutih > 0) {
                pesanan.push(`Nasi Putih x${qtyNasiPutih} - Rp ${(4000 * qtyNasiPutih).toLocaleString()}`);
                total += 4000 * qtyNasiPutih;
            }

            // AtiAmpela
            const atiAmpelaChecked = document.getElementById('ati-ampela').checked;
            const qtyAtiAmpela = parseInt(document.getElementById('qty-ati-ampela').value) || 0;
            if (atiAmpelaChecked && qtyAtiAmpela > 0) {
                pesanan.push(`AtiAmpela x${qtyAtiAmpela} - Rp ${(6000 * qtyAtiAmpela).toLocaleString()}`);
                total += 6000 * qtyAtiAmpela;
            }

            // Tahu/Tempe
            const tahuTempeChecked = document.getElementById('tahu-tempe').checked;
            const qtyTahuTempe = parseInt(document.getElementById('qty-tahu-tempe').value) || 0;
            if (tahuTempeChecked && qtyTahuTempe > 0) {
                pesanan.push(`Tahu/Tempe x${qtyTahuTempe} - Rp ${(1000 * qtyTahuTempe).toLocaleString()}`);
                total += 1000 * qtyTahuTempe;
            }

            // Sate Brutu
            const sateBrutuChecked = document.getElementById('sate-brutu').checked;
            const qtySateBrutu = parseInt(document.getElementById('qty-sate-brutu').value) || 0;
            if (sateBrutuChecked && qtySateBrutu > 0) {
                pesanan.push(`Sate Brutu x${qtySateBrutu} - Rp ${(3500 * qtySateBrutu).toLocaleString()}`);
                total += 3500 * qtySateBrutu;
            }

            // Kepala
            const kepalaChecked = document.getElementById('kepala').checked;
            const qtyKepala = parseInt(document.getElementById('qty-kepala').value) || 0;
            if (kepalaChecked && qtyKepala > 0) {
                pesanan.push(`Kepala x${qtyKepala} - Rp ${(2500 * qtyKepala).toLocaleString()}`);
                total += 2500 * qtyKepala;
            }

            if (pesanan.length === 0) {
                alert('Silakan pilih menu terlebih dahulu.');
                return;
            }

            let struk = `Nama Pemesan: ${nama}\n`;
            struk += `Pengiriman: ${pengiriman === 'antar' ? 'Diantar ke ' + alamat : 'Ambil di Warung'}\n\n`;
            struk += 'Pesanan:\n';
            pesanan.forEach(item => struk += item + '\n');
            struk += `\nTotal: Rp ${total.toLocaleString()}\n`;
            struk += 'Pembayaran via QRIS. Jika diantar, nego ongkir via WA.';

            document.getElementById('struk-content').textContent = struk;
            document.getElementById('struk').style.display = 'block';

            // Redirect to WhatsApp
            let waText = `Hallo Mama Yati, saya ${nama}, ingin memesan:\n`;
            pesanan.forEach(item => waText += item + '\n');
            waText += `\nPengiriman: ${pengiriman === 'antar' ? 'Diantar ke ' + alamat : 'Ambil di Warung'}\n`;
            waText += 'Total: Rp ' + total.toLocaleString();

            const waUrl = `https://wa.me/6285842902505?text=${encodeURIComponent(waText)}`;
            window.open(waUrl, '_blank');
        }

        function downloadStruk() {
            const strukContent = document.getElementById('struk-content').textContent;
            const canvas = document.getElementById('struk-canvas');
            const ctx = canvas.getContext('2d');

            // Set canvas background
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Set text properties
            ctx.fillStyle = 'black';
            ctx.font = '16px Arial';
            ctx.textBaseline = 'top';

            // Split text into lines and draw
            const lines = strukContent.split('\n');
            let y = 20;
            lines.forEach(line => {
                ctx.fillText(line, 20, y);
                y += 20;
            });

            // Convert to JPG and download
            const dataURL = canvas.toDataURL('image/jpeg');
            const a = document.createElement('a');
            a.href = dataURL;
            a.download = 'bukti_pesanan.jpg';
            a.click();
        }
    </script>
</body>
</html>
